(()=>{"use strict";class e{createToDoForm=e=>{const t=this.createForm(),r=this.createLabels(["*Title:","*Description:","*Due Date:","*Priority:"]),o=this.createToDoInputs(["todo-title","todo-description"]);let n=this.joinLists(this.appendInputsToLabels(r,o),this.appendButtons(e,"to-do"));return this.appendElementsToForm(t,n)};createForm(){let e=document.createElement("form");return this.assignAttribute(e,"method","post"),e}assignAttribute(e,t,r=""){e.setAttribute(t,r)}createLabels(e){let t=[];for(const r of e)t.push(this.createLabel(r));return t}createLabel(e){const t=document.createElement("label");return t.textContent=e,t}createToDoInputs(e){const t=this.createTextInputs(e),r=this.createDistinctInputs();return this.joinLists(t,r)}createTextInputs(e){let t=[];for(const r of e)t.push(this.createInput(r));return t}createInput(e,t=""){const r=document.createElement("input");let o=["name","required"],n=[e,""];return t&&(o.push("type"),n.push(t)),this.assignAttributes(r,o,n),r}assignAttributes(e,t,r){for(let o=0;o<t.length;o++)this.assignAttribute(e,t[o],r[o])}createDistinctInputs(){return[this.createDatetimeLocalInput("todo-dueDate"),this.createNumberInput("todo-priority")]}createDatetimeLocalInput(e){const t=this.createInput(e,"datetime-local");return this.assignAttribute(t,"value",this.getCurrentDate()),t}getCurrentDate(){return(new Date).toJSON().slice(0,19)}createNumberInput(e){const t=this.createInput(e,"number");return this.assignAttributes(t,["min","max","placeholder"],["1","3","1"]),t}appendInputsToLabels(e,t){let r=this.deepCloneNodes(e);const o=this.deepCloneNodes(t);for(let t=0;t<e.length;t++)r[t].appendChild(o[t]);return r}joinLists(e,t){return e.concat(t)}deepCloneNodes(e){let t=[];for(const r of e)t.push(r.cloneNode(!0));return t}appendButtons(e,t){return[e,this.createSubmitButton(t)]}createSubmitButton(e){const t=document.createElement("input");let r=["submit",`Create ${e}`];return this.assignAttributes(t,["type","value"],r),t}appendElementsToForm(e,t){const r=this.deepCloneNodes(t);for(const t of r)e.appendChild(t);return e}createProjectForm=e=>{const t=this.createForm(),r=this.createLabels(["*Name:"]),o=this.createTextInputs(["project-name"]);let n=this.joinLists(this.appendInputsToLabels(r,o),this.appendButtons(e,"project"));return this.appendElementsToForm(t,n)}}class t{constructor(t=e){this.script=document.querySelector("script"),this.formCreator=new t}loadPage(){this.createHeader(),this.createSidebar(),this.createMain(),this.createFooter()}createHeader(){let e=document.createElement("header"),t=document.createElement("nav"),r=this.createNavbar();e.appendChild(t),t.appendChild(r),this.script.parentNode.insertBefore(e,this.script)}createNavbar(){let e=this.createUl("navbar"),t=[this.createButton("New to-do",{className:"new-to-do"}),this.createButton("New project",{className:"new-project"})];return this.appendListElements(e,t),e}createUl(e=""){const t=document.createElement("ul");return e&&t.classList.add(e),t}appendListElements(e,t){for(let r of t)e.appendChild(r)}loadForm=e=>{if(null===document.querySelector("form")){let t=document.querySelector("main");const r=e(this.createButton("Cancel",{type:"button"}));t.appendChild(r)}};createButton(e,t){let r=document.createElement("button");return r.textContent=e,t.type&&r.setAttribute("type",t.type),t.className&&r.classList.add(t.className),r}removeForm(){document.querySelector("form").remove()}addProjectToSidebar(e){let t=document.querySelector(".projects-list");const r=this.createHeading(e,"h2");t.appendChild(this.createLi(r))}createLi(e){let t=document.createElement("li");return t.appendChild(e),t}createSidebar(){let e=document.createElement("nav"),t=[this.createHeading("Projects","h1"),this.createProjectsList()];this.appendListElements(e,t),this.script.parentNode.insertBefore(e,this.script)}createHeading(e,t){let r=document.createElement(t);return r.textContent=e,r}createProjectsList(){let e=this.createUl("projects-list");const t=this.createHeading("default","h2");return e.appendChild(this.createLi(t)),e}createMain(){const e=document.createElement("main");let t=this.createDiv("content");const r=this.createProjectContainer("default-container");t.appendChild(r),e.appendChild(t),this.script.parentNode.insertBefore(e,this.script)}createProjectContainer(e){let t=this.createDiv(e),r=this.createUl("todo-list");return t.appendChild(r),t}createDiv(e){let t=document.createElement("div");return t.classList.add(e),t}createFooter(){const e=document.createElement("footer");this.script.parentNode.insertBefore(e,this.script)}loadProject(e){this.replaceProjectContainer(`${e}-container`),this.addProjectToSidebar(e),this.removeForm()}removeProjectContainer(){document.querySelector(".content > div").remove()}replaceProjectContainer(e){let t=document.querySelector(".content"),r=this.createProjectContainer(e);this.removeProjectContainer(),t.appendChild(r)}getCurrentProjectName(){return document.querySelector(".content > div").className.split("-")[0]}}class r{addNavbarListener(e,t){document.querySelector(".navbar").addEventListener("click",(r=>this.handleNavbarButtons(r,e,t)))}handleNavbarButtons=(e,t,r)=>{let o=this.getAttributeFrom(e.target,"className"),n=this.getFormFunction(t.formCreator,o);"new-to-do"===o&&(t.loadForm(n),this.addFormListener(this.validateToDoForm,t)),"new-project"===o&&(t.loadForm(n),this.addFormListener(r[0],t))};getAttributeFrom(e,t){return e[t]}getFormFunction(e,t){return"new-to-do"===t?e.createToDoForm:"new-project"===t?e.createProjectForm:void 0}addFormListener(e,t){document.querySelector("form").addEventListener("click",(r=>this.handleFormButtons(r,e,t)))}handleFormButtons=(e,t,r)=>{let o=this.getAttributeFrom(e.target,"type");"button"===o&&r.removeForm(),"submit"===o&&t(e,r)};validateToDoForm=(e,t)=>{this.gatherToDoFormData(e).includes("")?console.log("Couldn't create To-do"):t.removeForm()};gatherToDoFormData=e=>(e.preventDefault(),[this.getAttributeFrom(document.querySelector("[name='todo-title']"),"value"),this.getAttributeFrom(document.querySelector("[name='todo-description']"),"value"),this.getAttributeFrom(document.querySelector("[name='todo-dueDate']"),"value"),this.getAttributeFrom(document.querySelector("[name='todo-priority']"),"value")])}class o{constructor(e){this.name=e,this.todos=[]}addTodo(e){this.todos.push(e)}get name(){return this._name}set name(e){this._name=e}get todos(){return this._todos}set todos(e){this._todos=e}removeTodo(){}}class n{constructor(e=o){this.projectList=[],this.addProject(new e("default"))}addProject(e){this.projectList.push(e)}validateProjectForm=(e,t,r=o)=>{const n=this.gatherProjectFormData(e);if(""===n)return void console.log("Couldn't create Project");const s=n.toLowerCase();let a=new r(s);this.addProject(a),t.loadProject(s)};gatherProjectFormData(e){return e.preventDefault(),document.querySelector("[name='project-name']").value}projectNameCoincides(e,t){return e.name===t}searchProject(e){return this.projectList.find((t=>this.projectNameCoincides(t,e)))}get projectList(){return this._projectList}set projectList(e){this._projectList=e}}(new class{constructor(){this.myDOMCreator=new t,this.myEventListenerAgregator=new r,this.myProjectManager=new n}loadPage(){this.myDOMCreator.loadPage(),this.myEventListenerAgregator.addNavbarListener(this.myDOMCreator,[this.myProjectManager.validateProjectForm])}}).loadPage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQ1R4SixLQUFLc0osWUFBWWxJLEtBQUtvSSxFQUN4QixDQUVBQyxvQkFBc0IsQ0FBQzdCLEVBQU9ILEVBQUs0QixFQUFjUixLQUMvQyxNQUFNNUIsRUFBV2pILEtBQUswSixzQkFBc0I5QixHQUM1QyxHQUFpQixLQUFiWCxFQUdGLFlBREF5QixRQUFRQyxJQUFJLDJCQUdkLE1BQU1nQixFQUFvQjFDLEVBQVMyQyxjQUNuQyxJQUFJNUQsRUFBYSxJQUFJcUQsRUFBY00sR0FDbkMzSixLQUFLdUosV0FBV3ZELEdBQ2hCeUIsRUFBSVQsWUFBWTJDLEVBQWtCLEVBR3BDRCxzQkFBc0I5QixHQUdwQixPQUZBQSxFQUFNZ0IsaUJBQ2NqSSxTQUFTcUQsY0FBYyx5QkFBeUJoRCxLQUV0RSxDQUVBNkkscUJBQXFCTCxFQUFTMUQsR0FDNUIsT0FBTzBELEVBQVExSCxPQUFTZ0UsQ0FDMUIsQ0FFQWdFLGNBQWNoRSxHQUNaLE9BQU85RixLQUFLc0osWUFBWVMsTUFBS1AsR0FDM0J4SixLQUFLNkoscUJBQXFCTCxFQUFTMUQsSUFDdkMsQ0FFSXdELGtCQUNGLE9BQU90SixLQUFLZ0ssWUFDZCxDQUVJVixnQkFBWXRJLEdBQ2RoQixLQUFLZ0ssYUFBZWhKLENBQ3RCLEdDNUN1QixJQ0VWLE1BQ2I2QyxjQUNFN0QsS0FBS2lLLGFBQWUsSUFBSXJHLEVBQ3hCNUQsS0FBS2tLLHlCQUEyQixJQUFJM0MsRUFDcEN2SCxLQUFLbUssaUJBQW1CLElBQUlmLENBQzlCLENBRUFsRixXQUVFbEUsS0FBS2lLLGFBQWEvRixXQUNsQmxFLEtBQUtrSyx5QkFBeUIxQyxrQkFBa0J4SCxLQUFLaUssYUFDbkQsQ0FBQ2pLLEtBQUttSyxpQkFBaUJWLHFCQUMzQixJRGJldkYsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9mb3JtLWNyZWF0b3IuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2RvbS1jcmVhdG9yLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9ldmVudC1saXN0ZW5lci1hZ3JlZ2F0b3IuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3QtbWFuYWdlci5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3BhZ2UtY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtQ3JlYXRvciB7XG4gIGNyZWF0ZVRvRG9Gb3JtID0gKGJ1dHRvbikgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmNyZWF0ZUZvcm0oKTtcbiAgICBjb25zdCBsYWJlbENvbnRlbnRzID0gWycqVGl0bGU6JywgJypEZXNjcmlwdGlvbjonLCAnKkR1ZSBEYXRlOicsICcqUHJpb3JpdHk6J107XG4gICAgY29uc3QgdGV4dElucHV0TmFtZXMgPSBbJ3RvZG8tdGl0bGUnLCAndG9kby1kZXNjcmlwdGlvbiddO1xuICAgIGNvbnN0IGxhYmVscyA9IHRoaXMuY3JlYXRlTGFiZWxzKGxhYmVsQ29udGVudHMpO1xuICAgIGNvbnN0IGlucHV0cyA9IHRoaXMuY3JlYXRlVG9Eb0lucHV0cyh0ZXh0SW5wdXROYW1lcyk7XG4gICAgbGV0IGVsZW1lbnRzID0gdGhpcy5qb2luTGlzdHMoXG4gICAgICB0aGlzLmFwcGVuZElucHV0c1RvTGFiZWxzKGxhYmVscywgaW5wdXRzKSxcbiAgICAgIHRoaXMuYXBwZW5kQnV0dG9ucyhidXR0b24sICd0by1kbycpKTtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmRFbGVtZW50c1RvRm9ybShmb3JtLCBlbGVtZW50cyk7XG4gIH1cblxuICBjcmVhdGVGb3JtKCkge1xuICAgIGxldCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgIHRoaXMuYXNzaWduQXR0cmlidXRlKGZvcm0sICdtZXRob2QnLCAncG9zdCcpO1xuICAgIHJldHVybiBmb3JtO1xuICB9XG5cbiAgYXNzaWduQXR0cmlidXRlKGVsZW1lbnQgLGF0dHJpYnV0ZSwgdmFsdWU9JycpIHtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgfVxuXG4gIGNyZWF0ZUxhYmVscyhsYWJlbENvbnRlbnRzKSB7XG4gICAgbGV0IGxhYmVscyA9IFtdO1xuICAgIGZvciAoY29uc3QgY29udGVudCBvZiBsYWJlbENvbnRlbnRzKVxuICAgICAgbGFiZWxzLnB1c2godGhpcy5jcmVhdGVMYWJlbChjb250ZW50KSk7XG4gICAgcmV0dXJuIGxhYmVscztcbiAgfVxuXG4gIGNyZWF0ZUxhYmVsKGNvbnRlbnQpIHtcbiAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgbGFiZWwudGV4dENvbnRlbnQgPSBjb250ZW50O1xuICAgIHJldHVybiBsYWJlbDtcbiAgfVxuXG4gIGNyZWF0ZVRvRG9JbnB1dHModGV4dElucHV0TmFtZXMpIHtcbiAgICBjb25zdCB0ZXh0SW5wdXRzID0gdGhpcy5jcmVhdGVUZXh0SW5wdXRzKHRleHRJbnB1dE5hbWVzKTtcbiAgICBjb25zdCBkaXN0aW5jdElucHV0cyA9IHRoaXMuY3JlYXRlRGlzdGluY3RJbnB1dHMoKTtcbiAgICByZXR1cm4gdGhpcy5qb2luTGlzdHModGV4dElucHV0cywgZGlzdGluY3RJbnB1dHMpO1xuICB9XG5cbiAgY3JlYXRlVGV4dElucHV0cyhpbnB1dE5hbWVzKSB7XG4gICAgbGV0IGlucHV0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgbmFtZSBvZiBpbnB1dE5hbWVzKVxuICAgICAgaW5wdXRzLnB1c2godGhpcy5jcmVhdGVJbnB1dChuYW1lKSk7XG4gICAgcmV0dXJuIGlucHV0cztcbiAgfVxuXG4gIGNyZWF0ZUlucHV0KG5hbWUsIHR5cGU9JycpIHtcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgbGV0IGF0dHJpYnV0ZXMgPSBbJ25hbWUnLCAncmVxdWlyZWQnXTtcbiAgICBsZXQgdmFsdWVzID0gW25hbWUsICcnXTtcbiAgICBpZiAodHlwZSkge1xuICAgICAgYXR0cmlidXRlcy5wdXNoKCd0eXBlJyk7XG4gICAgICB2YWx1ZXMucHVzaCh0eXBlKTtcbiAgICB9XG4gICAgdGhpcy5hc3NpZ25BdHRyaWJ1dGVzKGlucHV0LCBhdHRyaWJ1dGVzLCB2YWx1ZXMpO1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIGFzc2lnbkF0dHJpYnV0ZXMoZWxlbWVudCwgYXR0cmlidXRlcywgdmFsdWVzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKVxuICAgICAgdGhpcy5hc3NpZ25BdHRyaWJ1dGUoZWxlbWVudCwgYXR0cmlidXRlc1tpXSwgdmFsdWVzW2ldKTtcbiAgfVxuXG4gIGNyZWF0ZURpc3RpbmN0SW5wdXRzKCkge1xuICAgIC8vIFRoZXNlIGlucHV0cyBhcmUgdXNlZCBpbiB0aGUgdG8tZG8gZm9ybVxuICAgIGNvbnN0IGRhdGVQaWNrZXIgPSB0aGlzLmNyZWF0ZURhdGV0aW1lTG9jYWxJbnB1dCgndG9kby1kdWVEYXRlJyk7XG4gICAgY29uc3QgbnVtYmVySW5wdXQgPSB0aGlzLmNyZWF0ZU51bWJlcklucHV0KCd0b2RvLXByaW9yaXR5Jyk7XG4gICAgcmV0dXJuIFtkYXRlUGlja2VyLCBudW1iZXJJbnB1dF07XG4gIH1cblxuICBjcmVhdGVEYXRldGltZUxvY2FsSW5wdXQobmFtZSkge1xuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5jcmVhdGVJbnB1dChuYW1lLCAnZGF0ZXRpbWUtbG9jYWwnKTtcbiAgICB0aGlzLmFzc2lnbkF0dHJpYnV0ZShpbnB1dCwgJ3ZhbHVlJywgdGhpcy5nZXRDdXJyZW50RGF0ZSgpKTtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH1cblxuICBnZXRDdXJyZW50RGF0ZSgpIHtcbiAgICAvLyBSZXR1cm5zIGluIHRoZSBmb3JtYXQgeXl5eS1NTS1ERC1UaGg6bW1cbiAgICByZXR1cm4gbmV3IERhdGUoKS50b0pTT04oKS5zbGljZSgwLDE5KTtcbiAgfVxuXG4gIGNyZWF0ZU51bWJlcklucHV0KG5hbWUpIHtcbiAgICAvLyBGb3IgdGhlIG1vbWVudCBpdCdzIG9ubHkgdXNlZCBmb3IgYSBwcmlvcml0eSBpbnB1dFxuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5jcmVhdGVJbnB1dChuYW1lLCAnbnVtYmVyJyk7XG4gICAgbGV0IG1pblZhbHVlID0gJzEnO1xuICAgIGxldCBtYXhWYWx1ZSA9ICczJztcbiAgICBsZXQgYXR0cmlidXRlcyA9IFsnbWluJywgJ21heCcsICdwbGFjZWhvbGRlciddO1xuICAgIGxldCB2YWx1ZXMgPSBbbWluVmFsdWUsIG1heFZhbHVlLCBtaW5WYWx1ZV07XG4gICAgdGhpcy5hc3NpZ25BdHRyaWJ1dGVzKGlucHV0LCBhdHRyaWJ1dGVzLCB2YWx1ZXMpO1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIGFwcGVuZElucHV0c1RvTGFiZWxzKGxhYmVscywgaW5wdXRzKSB7XG4gICAgbGV0IGxhYmVsc0RlZXBDb3B5ID0gdGhpcy5kZWVwQ2xvbmVOb2RlcyhsYWJlbHMpO1xuICAgIGNvbnN0IGlucHV0c0RlZXBDb3B5ID0gdGhpcy5kZWVwQ2xvbmVOb2RlcyhpbnB1dHMpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFiZWxzLmxlbmd0aDsgaSsrKVxuICAgICAgbGFiZWxzRGVlcENvcHlbaV0uYXBwZW5kQ2hpbGQoaW5wdXRzRGVlcENvcHlbaV0pO1xuICAgIHJldHVybiBsYWJlbHNEZWVwQ29weTtcbiAgfVxuXG4gIGpvaW5MaXN0cyhmaXJzdExpc3QsIHNlY29uZExpc3QpIHtcbiAgICByZXR1cm4gZmlyc3RMaXN0LmNvbmNhdChzZWNvbmRMaXN0KTtcbiAgfVxuXG4gIGRlZXBDbG9uZU5vZGVzKG5vZGVzKSB7XG4gICAgbGV0IGRlZXBDbG9uZWROb2RlcyA9IFtdO1xuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2RlcylcbiAgICAgIGRlZXBDbG9uZWROb2Rlcy5wdXNoKG5vZGUuY2xvbmVOb2RlKHRydWUpKTtcbiAgICByZXR1cm4gZGVlcENsb25lZE5vZGVzO1xuICB9XG5cbiAgYXBwZW5kQnV0dG9ucyhidXR0b24sIHZhbHVlKSB7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5jcmVhdGVTdWJtaXRCdXR0b24odmFsdWUpO1xuICAgIHJldHVybiBbYnV0dG9uLCBzdWJtaXRCdXR0b25dO1xuICB9XG5cbiAgY3JlYXRlU3VibWl0QnV0dG9uKHZhbHVlKSB7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBsZXQgYXR0cmlidXRlcyA9IFsndHlwZScsICd2YWx1ZSddO1xuICAgIGxldCB2YWx1ZXMgPSBbJ3N1Ym1pdCcsIGBDcmVhdGUgJHt2YWx1ZX1gXTtcbiAgICB0aGlzLmFzc2lnbkF0dHJpYnV0ZXMoc3VibWl0QnV0dG9uLCBhdHRyaWJ1dGVzLCB2YWx1ZXMpO1xuICAgIHJldHVybiBzdWJtaXRCdXR0b247XG4gIH1cblxuICBhcHBlbmRFbGVtZW50c1RvRm9ybShmb3JtLCBlbGVtZW50cykge1xuICAgIGNvbnN0IGVsZW1lbnRzRGVlcENvcHkgPSB0aGlzLmRlZXBDbG9uZU5vZGVzKGVsZW1lbnRzKTtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHNEZWVwQ29weSlcbiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgcmV0dXJuIGZvcm07XG4gIH1cblxuICBjcmVhdGVQcm9qZWN0Rm9ybSA9IChidXR0b24pID0+IHtcbiAgICBjb25zdCBmb3JtID0gdGhpcy5jcmVhdGVGb3JtKCk7XG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLmNyZWF0ZUxhYmVscyhbJypOYW1lOiddKTtcbiAgICBjb25zdCBpbnB1dCA9IHRoaXMuY3JlYXRlVGV4dElucHV0cyhbJ3Byb2plY3QtbmFtZSddKTtcbiAgICBsZXQgZWxlbWVudHMgPSB0aGlzLmpvaW5MaXN0cyhcbiAgICAgIHRoaXMuYXBwZW5kSW5wdXRzVG9MYWJlbHMobGFiZWwsIGlucHV0KSxcbiAgICAgIHRoaXMuYXBwZW5kQnV0dG9ucyhidXR0b24sICdwcm9qZWN0JykpO1xuICAgIHJldHVybiB0aGlzLmFwcGVuZEVsZW1lbnRzVG9Gb3JtKGZvcm0sIGVsZW1lbnRzKTtcbiAgfVxufVxuIiwiaW1wb3J0IEZvcm1DcmVhdG9yIGZyb20gXCIuL2Zvcm0tY3JlYXRvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBET01DcmVhdG9yIHtcbiAgY29uc3RydWN0b3IoZm9ybUNyZWF0b3JPYmplY3Q9Rm9ybUNyZWF0b3IpIHtcbiAgICB0aGlzLnNjcmlwdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdCcpO1xuICAgIHRoaXMuZm9ybUNyZWF0b3IgPSBuZXcgZm9ybUNyZWF0b3JPYmplY3QoKTtcbiAgfVxuXG4gIGxvYWRQYWdlKCkge1xuICAgIHRoaXMuY3JlYXRlSGVhZGVyKCk7XG4gICAgdGhpcy5jcmVhdGVTaWRlYmFyKCk7XG4gICAgdGhpcy5jcmVhdGVNYWluKCk7XG4gICAgdGhpcy5jcmVhdGVGb290ZXIoKTtcbiAgfVxuXG4gIGNyZWF0ZUhlYWRlcigpIHtcbiAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJyk7XG4gICAgbGV0IG5hdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ25hdicpO1xuICAgIGxldCBuYXZiYXIgPSB0aGlzLmNyZWF0ZU5hdmJhcigpO1xuICAgIGhlYWRlci5hcHBlbmRDaGlsZChuYXYpO1xuICAgIG5hdi5hcHBlbmRDaGlsZChuYXZiYXIpO1xuICAgIHRoaXMuc2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGhlYWRlciwgdGhpcy5zY3JpcHQpO1xuICB9XG5cbiAgY3JlYXRlTmF2YmFyKCkge1xuICAgIC8vIENvbnNpZGVyIGFkZGluZyBtb3JlIGVsZW1lbnRzXG4gICAgbGV0IHVsID0gdGhpcy5jcmVhdGVVbCgnbmF2YmFyJyk7XG4gICAgbGV0IHRvZG9CdXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbignTmV3IHRvLWRvJywge2NsYXNzTmFtZTogJ25ldy10by1kbyd9KTtcbiAgICBsZXQgcHJvamVjdEJ1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKCdOZXcgcHJvamVjdCcsXG4gICAgICB7Y2xhc3NOYW1lOiAnbmV3LXByb2plY3QnfSk7XG4gICAgbGV0IGxpc3RFbGVtZW50cyA9IFt0b2RvQnV0dG9uLCBwcm9qZWN0QnV0dG9uXTtcbiAgICB0aGlzLmFwcGVuZExpc3RFbGVtZW50cyh1bCwgbGlzdEVsZW1lbnRzKTtcbiAgICByZXR1cm4gdWw7XG4gIH1cblxuICBjcmVhdGVVbChjbGFzc05hbWU9JycpIHtcbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgaWYgKGNsYXNzTmFtZSlcbiAgICAgIHVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICByZXR1cm4gdWw7XG4gIH1cblxuICBhcHBlbmRMaXN0RWxlbWVudHMobGlzdCwgZWxlbWVudHMpIHtcbiAgICBmb3IgKGxldCBlbGVtZW50IG9mIGVsZW1lbnRzKVxuICAgICAgbGlzdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgfVxuXG4gIGxvYWRGb3JtID0gKGNyZWF0ZUZvcm1GdW5jdGlvbikgPT4ge1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykgPT09IG51bGwpIHtcbiAgICAgIGxldCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xuICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gdGhpcy5jcmVhdGVCdXR0b24oJ0NhbmNlbCcsIHt0eXBlOiAnYnV0dG9uJ30pO1xuICAgICAgY29uc3QgZm9ybSA9IGNyZWF0ZUZvcm1GdW5jdGlvbihjYW5jZWxCdXR0b24pO1xuICAgICAgbWFpbi5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVCdXR0b24oY29udGVudCwgYXJncykge1xuICAgIGxldCBuZXdCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBuZXdCdXR0b24udGV4dENvbnRlbnQgPSBjb250ZW50O1xuICAgIGlmIChhcmdzWyd0eXBlJ10pXG4gICAgICBuZXdCdXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgYXJnc1sndHlwZSddKTtcbiAgICBpZiAoYXJnc1snY2xhc3NOYW1lJ10pXG4gICAgICBuZXdCdXR0b24uY2xhc3NMaXN0LmFkZChhcmdzWydjbGFzc05hbWUnXSk7XG4gICAgcmV0dXJuIG5ld0J1dHRvbjtcbiAgfVxuXG4gIHJlbW92ZUZvcm0oKSB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICBmb3JtLnJlbW92ZSgpO1xuICB9XG5cbiAgYWRkUHJvamVjdFRvU2lkZWJhcihwcm9qZWN0TmFtZSkge1xuICAgIGxldCBwcm9qZWN0c0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMtbGlzdCcpO1xuICAgIGNvbnN0IG5ld1Byb2plY3QgPSB0aGlzLmNyZWF0ZUhlYWRpbmcocHJvamVjdE5hbWUsICdoMicpO1xuICAgIHByb2plY3RzTGlzdC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUxpKG5ld1Byb2plY3QpKTtcbiAgfVxuXG4gIGNyZWF0ZUxpKGVsZW1lbnQpIHtcbiAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIGxpLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIHJldHVybiBsaTtcbiAgfVxuXG4gIGNyZWF0ZVNpZGViYXIoKSB7XG4gICAgbGV0IG5hdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ25hdicpO1xuICAgIGNvbnN0IHByb2plY3RzSDEgPSB0aGlzLmNyZWF0ZUhlYWRpbmcoJ1Byb2plY3RzJywgJ2gxJyk7XG4gICAgbGV0IHByb2plY3RzTGlzdCA9IHRoaXMuY3JlYXRlUHJvamVjdHNMaXN0KCk7XG4gICAgbGV0IGxpc3RFbGVtZW50cyA9IFtwcm9qZWN0c0gxLCBwcm9qZWN0c0xpc3RdO1xuICAgIHRoaXMuYXBwZW5kTGlzdEVsZW1lbnRzKG5hdiwgbGlzdEVsZW1lbnRzKTtcbiAgICB0aGlzLnNjcmlwdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuYXYsIHRoaXMuc2NyaXB0KTtcbiAgfVxuXG4gIGNyZWF0ZUhlYWRpbmcoY29udGVudCwgaGVhZGluZykge1xuICAgIGxldCBoZWFkaW5nRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaGVhZGluZyk7XG4gICAgaGVhZGluZ0VsZW1lbnQudGV4dENvbnRlbnQgPSBjb250ZW50O1xuICAgIHJldHVybiBoZWFkaW5nRWxlbWVudDtcbiAgfVxuXG4gIGNyZWF0ZVByb2plY3RzTGlzdCgpIHtcbiAgICBsZXQgcHJvamVjdHNMaXN0ID0gdGhpcy5jcmVhdGVVbCgncHJvamVjdHMtbGlzdCcpO1xuICAgIGNvbnN0IGRlZmF1bHRIMiA9IHRoaXMuY3JlYXRlSGVhZGluZygnZGVmYXVsdCcsICdoMicpO1xuICAgIHByb2plY3RzTGlzdC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUxpKGRlZmF1bHRIMikpO1xuICAgIHJldHVybiBwcm9qZWN0c0xpc3Q7XG4gIH1cblxuICBjcmVhdGVNYWluKCkge1xuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtYWluJyk7XG4gICAgbGV0IGNvbnRlbnQgPSB0aGlzLmNyZWF0ZURpdignY29udGVudCcpO1xuICAgIGNvbnN0IGRlZmF1bHRDb250YWluZXIgPSB0aGlzLmNyZWF0ZVByb2plY3RDb250YWluZXIoJ2RlZmF1bHQtY29udGFpbmVyJylcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGRlZmF1bHRDb250YWluZXIpO1xuICAgIG1haW4uYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgdGhpcy5zY3JpcHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobWFpbiwgdGhpcy5zY3JpcHQpO1xuICB9XG5cbiAgY3JlYXRlUHJvamVjdENvbnRhaW5lcihwcm9qZWN0Q2xhc3NOYW1lKSB7XG4gICAgbGV0IHByb2plY3RDb250YWluZXIgPSB0aGlzLmNyZWF0ZURpdihwcm9qZWN0Q2xhc3NOYW1lKTtcbiAgICBsZXQgdG9kb0xpc3QgPSB0aGlzLmNyZWF0ZVVsKCd0b2RvLWxpc3QnKTtcbiAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRvZG9MaXN0KTtcbiAgICByZXR1cm4gcHJvamVjdENvbnRhaW5lcjtcbiAgfVxuXG4gIGNyZWF0ZURpdihjbGFzc05hbWUpIHtcbiAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICByZXR1cm4gZGl2O1xuICB9XG5cbiAgY3JlYXRlRm9vdGVyKCkge1xuICAgIGNvbnN0IGZvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvb3RlcicpO1xuICAgIHRoaXMuc2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGZvb3RlciwgdGhpcy5zY3JpcHQpO1xuICB9XG5cbiAgbG9hZFByb2plY3QoZm9ybURhdGEpIHtcbiAgICB0aGlzLnJlcGxhY2VQcm9qZWN0Q29udGFpbmVyKGAke2Zvcm1EYXRhfS1jb250YWluZXJgKTtcbiAgICB0aGlzLmFkZFByb2plY3RUb1NpZGViYXIoZm9ybURhdGEpO1xuICAgIHRoaXMucmVtb3ZlRm9ybSgpO1xuICB9XG5cbiAgcmVtb3ZlUHJvamVjdENvbnRhaW5lcigpIHtcbiAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQgPiBkaXYnKTtcbiAgICBwcm9qZWN0Q29udGFpbmVyLnJlbW92ZSgpO1xuICB9XG5cbiAgcmVwbGFjZVByb2plY3RDb250YWluZXIocHJvamVjdENsYXNzTmFtZSkge1xuICAgIGxldCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKTtcbiAgICBsZXQgbmV3UHJvamVjdENvbnRhaW5lciA9IHRoaXMuY3JlYXRlUHJvamVjdENvbnRhaW5lcihwcm9qZWN0Q2xhc3NOYW1lKTtcbiAgICB0aGlzLnJlbW92ZVByb2plY3RDb250YWluZXIoKTtcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKG5ld1Byb2plY3RDb250YWluZXIpO1xuICB9XG5cbiAgZ2V0Q3VycmVudFByb2plY3ROYW1lKCkge1xuICAgIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCA+IGRpdicpO1xuICAgIGxldCBwcm9qZWN0Q2xhc3NOYW1lID0gcHJvamVjdENvbnRhaW5lci5jbGFzc05hbWU7XG4gICAgcmV0dXJuIHByb2plY3RDbGFzc05hbWUuc3BsaXQoJy0nKVswXTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnRMaXN0ZW5lckFncmVnYXRvciB7XG4gIC8vIGRjbyBtZWFucyBET01DcmVhdG9yT2JqZWN0XG5cbiAgYWRkTmF2YmFyTGlzdGVuZXIoZGNvLCB2YWxpZGF0ZUZ1bmN0aW9ucykge1xuICAgIGxldCBuYXZiYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyJyk7XG4gICAgbmF2YmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcbiAgICAgIChldmVudCkgPT4gdGhpcy5oYW5kbGVOYXZiYXJCdXR0b25zKGV2ZW50LCBkY28sIHZhbGlkYXRlRnVuY3Rpb25zKSk7XG4gIH1cblxuICBoYW5kbGVOYXZiYXJCdXR0b25zID0gKGV2ZW50LCBkY28sIHZhbGlkYXRlRnVuY3Rpb25zKSA9PiB7XG4gICAgbGV0IGJ1dHRvbkNsYXNzTmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlRnJvbShldmVudC50YXJnZXQsICdjbGFzc05hbWUnKTtcbiAgICBsZXQgZm9ybUZ1bmN0aW9uID0gdGhpcy5nZXRGb3JtRnVuY3Rpb24oZGNvLmZvcm1DcmVhdG9yLCBidXR0b25DbGFzc05hbWUpO1xuICAgIGlmIChidXR0b25DbGFzc05hbWUgPT09ICduZXctdG8tZG8nKSB7XG4gICAgICBkY28ubG9hZEZvcm0oZm9ybUZ1bmN0aW9uKTtcbiAgICAgIHRoaXMuYWRkRm9ybUxpc3RlbmVyKHRoaXMudmFsaWRhdGVUb0RvRm9ybSwgZGNvKTtcbiAgICB9XG4gICAgaWYgKGJ1dHRvbkNsYXNzTmFtZSA9PT0gJ25ldy1wcm9qZWN0Jykge1xuICAgICAgZGNvLmxvYWRGb3JtKGZvcm1GdW5jdGlvbik7XG4gICAgICB0aGlzLmFkZEZvcm1MaXN0ZW5lcih2YWxpZGF0ZUZ1bmN0aW9uc1swXSwgZGNvKTtcbiAgICB9XG4gIH1cblxuICBnZXRBdHRyaWJ1dGVGcm9tKGVsZW1lbnQsIGF0dHJpYnV0ZSkge1xuICAgIHJldHVybiBlbGVtZW50W2F0dHJpYnV0ZV07XG4gIH1cblxuICBnZXRGb3JtRnVuY3Rpb24oZm9ybUNyZWF0b3IsIGZvcm0pIHtcbiAgICBpZiAoZm9ybSA9PT0gJ25ldy10by1kbycpXG4gICAgICByZXR1cm4gZm9ybUNyZWF0b3IuY3JlYXRlVG9Eb0Zvcm07XG4gICAgaWYgKGZvcm0gPT09ICduZXctcHJvamVjdCcpXG4gICAgICByZXR1cm4gZm9ybUNyZWF0b3IuY3JlYXRlUHJvamVjdEZvcm07XG4gIH1cblxuICBhZGRGb3JtTGlzdGVuZXIodmFsaWRhdGVGdW5jdGlvbiwgZGNvKSB7XG4gICAgbGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsXG4gICAgICAoZXZlbnQpID0+IHRoaXMuaGFuZGxlRm9ybUJ1dHRvbnMoZXZlbnQsIHZhbGlkYXRlRnVuY3Rpb24sIGRjbykpO1xuICB9XG5cbiAgaGFuZGxlRm9ybUJ1dHRvbnMgPSAoZXZlbnQsIHZhbGlkYXRlRnVuY3Rpb24sIGRjbykgPT4ge1xuICAgIGxldCBidXR0b25UeXBlID0gdGhpcy5nZXRBdHRyaWJ1dGVGcm9tKGV2ZW50LnRhcmdldCwgJ3R5cGUnKTtcbiAgICBpZiAoYnV0dG9uVHlwZSA9PT0gJ2J1dHRvbicpXG4gICAgICBkY28ucmVtb3ZlRm9ybSgpO1xuICAgIGlmIChidXR0b25UeXBlID09PSAnc3VibWl0JylcbiAgICAgIHZhbGlkYXRlRnVuY3Rpb24oZXZlbnQsIGRjbyk7XG4gIH1cblxuICB2YWxpZGF0ZVRvRG9Gb3JtID0gKGV2ZW50LCBkY28pID0+IHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuZ2F0aGVyVG9Eb0Zvcm1EYXRhKGV2ZW50KTtcbiAgICBpZiAoZm9ybURhdGEuaW5jbHVkZXMoJycpKSB7XG4gICAgICAvLyBBZGQgc29tZXRoaW5nIHRvIG5vdGlmeSBlcnJvciB0byB1c2VyIChtYXliZSB1c2UgYSBtb2RhbClcbiAgICAgIGNvbnNvbGUubG9nKFwiQ291bGRuJ3QgY3JlYXRlIFRvLWRvXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBDcmVhdGUgVG8tZG8gb2JqZWN0XG4gICAgLy8gQWRkIHRvLWRvIHRvIHByb2plY3Qgb2JqZWN0XG4gICAgLy8gQ3JlYXRlIGxpIHdpdGggdG8tZG8gaW5mb3JtYXRpb25cbiAgICBkY28ucmVtb3ZlRm9ybSgpO1xuICB9XG5cbiAgZ2F0aGVyVG9Eb0Zvcm1EYXRhID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB0b2RvVGl0bGUgPSB0aGlzLmdldEF0dHJpYnV0ZUZyb20oXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0ndG9kby10aXRsZSddXCIpLCAndmFsdWUnKTtcbiAgICBjb25zdCB0b2RvRGVzY3JpcHRpb24gPSB0aGlzLmdldEF0dHJpYnV0ZUZyb20oXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J3RvZG8tZGVzY3JpcHRpb24nXVwiKSwgJ3ZhbHVlJyk7XG4gICAgY29uc3QgdG9kb0R1ZURhdGUgPSB0aGlzLmdldEF0dHJpYnV0ZUZyb20oXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J3RvZG8tZHVlRGF0ZSddXCIpLCAndmFsdWUnKTtcbiAgICBjb25zdCB0b2RvUHJpb3JpdHkgPSB0aGlzLmdldEF0dHJpYnV0ZUZyb20oXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J3RvZG8tcHJpb3JpdHknXVwiKSwgJ3ZhbHVlJyk7XG4gICAgLy8gQ29uc2lkZXIgcmV0dXJuaW5nIGFuIG9iamVjdCBpbnN0ZWFkXG4gICAgcmV0dXJuIFt0b2RvVGl0bGUsIHRvZG9EZXNjcmlwdGlvbiwgdG9kb0R1ZURhdGUsIHRvZG9Qcmlvcml0eV07XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3QgeyAgXG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMudG9kb3MgPSBbXTtcbiAgfVxuXG4gIGFkZFRvZG8odG9kbykge1xuICAgIHRoaXMudG9kb3MucHVzaCh0b2RvKTtcbiAgfVxuXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG5cbiAgc2V0IG5hbWUodmFsdWUpIHtcbiAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gIH1cblxuICBnZXQgdG9kb3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RvZG9zO1xuICB9XG5cbiAgc2V0IHRvZG9zKHZhbHVlKSB7XG4gICAgdGhpcy5fdG9kb3MgPSB2YWx1ZTtcbiAgfVxuXG4gIHJlbW92ZVRvZG8oKSB7XG4gICAgLy8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgZWxlbWVudCB0byBiZSByZW1vdmVkIChjcmVhdGUgb3RoZXIgZnVuY3Rpb24gZm9yIGl0KVxuICAgIC8vIHVzZSB0aGUgbmV4dCBsaW5lXG4gICAgLy8gdGhpcy50b2RvcyA9IHRoaXMudG9kb3Muc2xpY2UoMCwgbikuY29uY2F0KHRoaXMudG9kb3Muc2xpY2UobiArIDEpKVxuICB9XG59XG4iLCJpbXBvcnQgUHJvamVjdCBmcm9tICcuL3Byb2plY3QuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9qZWN0TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHByb2plY3RPYmplY3Q9UHJvamVjdCkge1xuICAgIHRoaXMucHJvamVjdExpc3QgPSBbXTtcbiAgICB0aGlzLmFkZFByb2plY3QobmV3IHByb2plY3RPYmplY3QoJ2RlZmF1bHQnKSk7XG4gIH1cblxuICBhZGRQcm9qZWN0KHByb2plY3QpIHtcbiAgICB0aGlzLnByb2plY3RMaXN0LnB1c2gocHJvamVjdCk7XG4gIH1cblxuICB2YWxpZGF0ZVByb2plY3RGb3JtID0gKGV2ZW50LCBkY28sIHByb2plY3RPYmplY3Q9UHJvamVjdCkgPT4ge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gdGhpcy5nYXRoZXJQcm9qZWN0Rm9ybURhdGEoZXZlbnQpO1xuICAgIGlmIChmb3JtRGF0YSA9PT0gJycpIHtcbiAgICAgIC8vIEFkZCBzb21ldGhpbmcgdG8gbm90aWZ5IGVycm9yIHRvIHVzZXIgKG1heWJlIGNyZWF0ZSBhIG1vZGFsKVxuICAgICAgY29uc29sZS5sb2coXCJDb3VsZG4ndCBjcmVhdGUgUHJvamVjdFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZm9ybURhdGFMb3dlcmNhc2UgPSBmb3JtRGF0YS50b0xvd2VyQ2FzZSgpO1xuICAgIGxldCBuZXdQcm9qZWN0ID0gbmV3IHByb2plY3RPYmplY3QoZm9ybURhdGFMb3dlcmNhc2UpO1xuICAgIHRoaXMuYWRkUHJvamVjdChuZXdQcm9qZWN0KTtcbiAgICBkY28ubG9hZFByb2plY3QoZm9ybURhdGFMb3dlcmNhc2UpO1xuICB9XG5cbiAgZ2F0aGVyUHJvamVjdEZvcm1EYXRhKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0ncHJvamVjdC1uYW1lJ11cIikudmFsdWU7XG4gICAgcmV0dXJuIHByb2plY3ROYW1lO1xuICB9XG5cbiAgcHJvamVjdE5hbWVDb2luY2lkZXMocHJvamVjdCwgcHJvamVjdE5hbWUpIHtcbiAgICByZXR1cm4gcHJvamVjdC5uYW1lID09PSBwcm9qZWN0TmFtZTtcbiAgfVxuXG4gIHNlYXJjaFByb2plY3QocHJvamVjdE5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9qZWN0TGlzdC5maW5kKHByb2plY3QgPT5cbiAgICAgIHRoaXMucHJvamVjdE5hbWVDb2luY2lkZXMocHJvamVjdCwgcHJvamVjdE5hbWUpKTtcbiAgfVxuXG4gIGdldCBwcm9qZWN0TGlzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvamVjdExpc3Q7XG4gIH1cblxuICBzZXQgcHJvamVjdExpc3QodmFsdWUpIHtcbiAgICB0aGlzLl9wcm9qZWN0TGlzdCA9IHZhbHVlO1xuICB9XG5cbiAgLy8gRnVuY3Rpb24gdG8gcmVtb3ZlIHByb2plY3RcbiAgLy8gRnVuY3Rpb24gdG8gc2VsZWN0IHByb2plY3Rcbn1cbiIsImltcG9ydCBQYWdlQ29udHJvbGxlciBmcm9tIFwiLi9wYWdlLWNvbnRyb2xsZXIuanNcIjtcblxuY29uc3QgbXlQYWdlQ29udHJvbGxlciA9IG5ldyBQYWdlQ29udHJvbGxlcjtcbm15UGFnZUNvbnRyb2xsZXIubG9hZFBhZ2UoKTtcbiIsImltcG9ydCBET01DcmVhdG9yIGZyb20gJy4vZG9tLWNyZWF0b3IuanMnO1xuaW1wb3J0IEV2ZW50TGlzdGVuZXJBZ3JlZ2F0b3IgZnJvbSAnLi9ldmVudC1saXN0ZW5lci1hZ3JlZ2F0b3IuanMnO1xuaW1wb3J0IFByb2plY3RNYW5hZ2VyIGZyb20gJy4vcHJvamVjdC1tYW5hZ2VyLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnZUNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm15RE9NQ3JlYXRvciA9IG5ldyBET01DcmVhdG9yKCk7XG4gICAgdGhpcy5teUV2ZW50TGlzdGVuZXJBZ3JlZ2F0b3IgPSBuZXcgRXZlbnRMaXN0ZW5lckFncmVnYXRvcigpO1xuICAgIHRoaXMubXlQcm9qZWN0TWFuYWdlciA9IG5ldyBQcm9qZWN0TWFuYWdlcigpO1xuICB9XG5cbiAgbG9hZFBhZ2UoKSB7XG4gICAgLy8gQWRkIHZhbGlkYXRlVG9Eb0Zvcm0gdG8gdGVzdCBpdFxuICAgIHRoaXMubXlET01DcmVhdG9yLmxvYWRQYWdlKCk7XG4gICAgdGhpcy5teUV2ZW50TGlzdGVuZXJBZ3JlZ2F0b3IuYWRkTmF2YmFyTGlzdGVuZXIodGhpcy5teURPTUNyZWF0b3IsXG4gICAgICBbdGhpcy5teVByb2plY3RNYW5hZ2VyLnZhbGlkYXRlUHJvamVjdEZvcm1dKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkZvcm1DcmVhdG9yIiwiY3JlYXRlVG9Eb0Zvcm0iLCJidXR0b24iLCJmb3JtIiwidGhpcyIsImNyZWF0ZUZvcm0iLCJsYWJlbHMiLCJjcmVhdGVMYWJlbHMiLCJpbnB1dHMiLCJjcmVhdGVUb0RvSW5wdXRzIiwiZWxlbWVudHMiLCJqb2luTGlzdHMiLCJhcHBlbmRJbnB1dHNUb0xhYmVscyIsImFwcGVuZEJ1dHRvbnMiLCJhcHBlbmRFbGVtZW50c1RvRm9ybSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImFzc2lnbkF0dHJpYnV0ZSIsImVsZW1lbnQiLCJhdHRyaWJ1dGUiLCJ2YWx1ZSIsInNldEF0dHJpYnV0ZSIsImxhYmVsQ29udGVudHMiLCJjb250ZW50IiwicHVzaCIsImNyZWF0ZUxhYmVsIiwibGFiZWwiLCJ0ZXh0Q29udGVudCIsInRleHRJbnB1dE5hbWVzIiwidGV4dElucHV0cyIsImNyZWF0ZVRleHRJbnB1dHMiLCJkaXN0aW5jdElucHV0cyIsImNyZWF0ZURpc3RpbmN0SW5wdXRzIiwiaW5wdXROYW1lcyIsIm5hbWUiLCJjcmVhdGVJbnB1dCIsInR5cGUiLCJpbnB1dCIsImF0dHJpYnV0ZXMiLCJ2YWx1ZXMiLCJhc3NpZ25BdHRyaWJ1dGVzIiwiaSIsImxlbmd0aCIsImNyZWF0ZURhdGV0aW1lTG9jYWxJbnB1dCIsImNyZWF0ZU51bWJlcklucHV0IiwiZ2V0Q3VycmVudERhdGUiLCJEYXRlIiwidG9KU09OIiwic2xpY2UiLCJsYWJlbHNEZWVwQ29weSIsImRlZXBDbG9uZU5vZGVzIiwiaW5wdXRzRGVlcENvcHkiLCJhcHBlbmRDaGlsZCIsImZpcnN0TGlzdCIsInNlY29uZExpc3QiLCJjb25jYXQiLCJub2RlcyIsImRlZXBDbG9uZWROb2RlcyIsIm5vZGUiLCJjbG9uZU5vZGUiLCJjcmVhdGVTdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b24iLCJlbGVtZW50c0RlZXBDb3B5IiwiY3JlYXRlUHJvamVjdEZvcm0iLCJET01DcmVhdG9yIiwiY29uc3RydWN0b3IiLCJmb3JtQ3JlYXRvck9iamVjdCIsInNjcmlwdCIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtQ3JlYXRvciIsImxvYWRQYWdlIiwiY3JlYXRlSGVhZGVyIiwiY3JlYXRlU2lkZWJhciIsImNyZWF0ZU1haW4iLCJjcmVhdGVGb290ZXIiLCJoZWFkZXIiLCJuYXYiLCJuYXZiYXIiLCJjcmVhdGVOYXZiYXIiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwidWwiLCJjcmVhdGVVbCIsImxpc3RFbGVtZW50cyIsImNyZWF0ZUJ1dHRvbiIsImNsYXNzTmFtZSIsImFwcGVuZExpc3RFbGVtZW50cyIsImNsYXNzTGlzdCIsImFkZCIsImxpc3QiLCJsb2FkRm9ybSIsImNyZWF0ZUZvcm1GdW5jdGlvbiIsIm1haW4iLCJhcmdzIiwibmV3QnV0dG9uIiwicmVtb3ZlRm9ybSIsInJlbW92ZSIsImFkZFByb2plY3RUb1NpZGViYXIiLCJwcm9qZWN0TmFtZSIsInByb2plY3RzTGlzdCIsIm5ld1Byb2plY3QiLCJjcmVhdGVIZWFkaW5nIiwiY3JlYXRlTGkiLCJsaSIsImNyZWF0ZVByb2plY3RzTGlzdCIsImhlYWRpbmciLCJoZWFkaW5nRWxlbWVudCIsImRlZmF1bHRIMiIsImNyZWF0ZURpdiIsImRlZmF1bHRDb250YWluZXIiLCJjcmVhdGVQcm9qZWN0Q29udGFpbmVyIiwicHJvamVjdENsYXNzTmFtZSIsInByb2plY3RDb250YWluZXIiLCJ0b2RvTGlzdCIsImRpdiIsImZvb3RlciIsImxvYWRQcm9qZWN0IiwiZm9ybURhdGEiLCJyZXBsYWNlUHJvamVjdENvbnRhaW5lciIsInJlbW92ZVByb2plY3RDb250YWluZXIiLCJuZXdQcm9qZWN0Q29udGFpbmVyIiwiZ2V0Q3VycmVudFByb2plY3ROYW1lIiwic3BsaXQiLCJFdmVudExpc3RlbmVyQWdyZWdhdG9yIiwiYWRkTmF2YmFyTGlzdGVuZXIiLCJkY28iLCJ2YWxpZGF0ZUZ1bmN0aW9ucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImhhbmRsZU5hdmJhckJ1dHRvbnMiLCJidXR0b25DbGFzc05hbWUiLCJnZXRBdHRyaWJ1dGVGcm9tIiwidGFyZ2V0IiwiZm9ybUZ1bmN0aW9uIiwiZ2V0Rm9ybUZ1bmN0aW9uIiwiYWRkRm9ybUxpc3RlbmVyIiwidmFsaWRhdGVUb0RvRm9ybSIsInZhbGlkYXRlRnVuY3Rpb24iLCJoYW5kbGVGb3JtQnV0dG9ucyIsImJ1dHRvblR5cGUiLCJnYXRoZXJUb0RvRm9ybURhdGEiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJsb2ciLCJwcmV2ZW50RGVmYXVsdCIsIlByb2plY3QiLCJ0b2RvcyIsImFkZFRvZG8iLCJ0b2RvIiwiX25hbWUiLCJfdG9kb3MiLCJyZW1vdmVUb2RvIiwiUHJvamVjdE1hbmFnZXIiLCJwcm9qZWN0T2JqZWN0IiwicHJvamVjdExpc3QiLCJhZGRQcm9qZWN0IiwicHJvamVjdCIsInZhbGlkYXRlUHJvamVjdEZvcm0iLCJnYXRoZXJQcm9qZWN0Rm9ybURhdGEiLCJmb3JtRGF0YUxvd2VyY2FzZSIsInRvTG93ZXJDYXNlIiwicHJvamVjdE5hbWVDb2luY2lkZXMiLCJzZWFyY2hQcm9qZWN0IiwiZmluZCIsIl9wcm9qZWN0TGlzdCIsIm15RE9NQ3JlYXRvciIsIm15RXZlbnRMaXN0ZW5lckFncmVnYXRvciIsIm15UHJvamVjdE1hbmFnZXIiXSwic291cmNlUm9vdCI6IiJ9