(()=>{"use strict";class e{createToDoForm(e){const t=this.createLabels(),r=this.createInputs(),n=this.appendInputs(t,r);return n.push(e),this.appendFormElements(n)}createLabels(){const e=["*Title:","*Description:","*Due Date:","*Priority:"];let t=[];for(const r of e)t.push(this.createLabel(r));return t}createLabel(e){const t=document.createElement("label");return t.textContent=e,t}createInputs(){const e=this.createTextInputs(),t=this.createDistinctInputs();return e.concat(t)}createTextInputs(){let e=[];const t=["todo-title","todo-description"];for(const r of t)e.push(this.createInput(r));return e}createDistinctInputs(){return[this.createDatetimeLocalInput("todo-dueDate"),this.createNumberInput("todo-priority")]}createInput(e,t=""){const r=document.createElement("input");return r.setAttribute("name",e),r.setAttribute("required",""),t&&r.setAttribute("type",t),r}createNumberInput(e){const t=this.createInput(e,"number");return t.setAttribute("min","1"),t.setAttribute("max","3"),t.setAttribute("placeholder","1"),t}createDatetimeLocalInput(e){const t=this.createInput(e,"datetime-local");return t.setAttribute("value",this.getCurrentDate()),t}getCurrentDate(){return(new Date).toJSON().slice(0,19)}appendInputs(e,t){let r=this.deepCloneNodes(e);const n=this.deepCloneNodes(t);for(let t=0;t<e.length;t++)r[t].appendChild(n[t]);return r}deepCloneNodes(e){let t=[];for(const r of e)t.push(r.cloneNode(!0));return t}appendFormElements(e){const t=document.createElement("form"),r=this.deepCloneNodes(e),n=this.createSubmitButton("Create to-do");t.setAttribute("method","post"),r.push(n);for(const e of r)t.appendChild(e);return t.addEventListener("click",this.handleButtons),t}createSubmitButton(e){const t=document.createElement("input");return t.setAttribute("type","submit"),t.setAttribute("value",e),t}handleButtons=e=>{"button"===e.target.type&&this.removeForm(),"submit"===e.target.type&&this.gatherFormData(e)};removeForm(){document.querySelector("form").remove()}gatherFormData(e){e.preventDefault(),document.querySelector("[name='todo-title']").value,document.querySelector("[name='todo-description']").value,document.querySelector("[name='todo-dueDate']").value,document.querySelector("[name='todo-priority']").value}}(new class{script=document.querySelector("script");formCreator=new e;loadPage(){this.createHeader(),this.createMain(),this.createFooter()}createHeader(){let e=document.createElement("header"),t=document.createElement("nav"),r=this.createNavbar();e.appendChild(t),t.appendChild(r),this.script.parentNode.insertBefore(e,this.script)}createNavbar(){let e=this.createUl(),t=this.createButton("New to-do");return t.addEventListener("click",this.loadForm),e.appendChild(this.createLi(t)),e}createUl(){return document.createElement("ul")}loadForm=()=>{if(null===document.querySelector("form")){let e=document.querySelector("main");const t=this.createButton("Cancel","button"),r=this.formCreator.createToDoForm(t);e.appendChild(r)}};createLi(e){let t=document.createElement("li");return t.appendChild(e),t}createButton(e,t=""){let r=document.createElement("button");return r.textContent=e,"button"===t&&r.setAttribute("type",t),r}removeForm=()=>{document.querySelector("form").remove()};createSidebar(){let e=document.createElement("nav");const t=this.createH1("Projects"),r=this.createH2("Default");e.appendChild(t),e.appendChild(r),this.script.parentNode.insertBefore(e,this.script)}createH1(e){let t=document.createElement("h1");return t.textContent=e,t}createH2(e){let t=document.createElement("h2");return t.textContent=e,t}createMain(){const e=document.createElement("main");this.script.parentNode.insertBefore(e,this.script)}createFooter(){const e=document.createElement("footer");this.script.parentNode.insertBefore(e,this.script)}}).loadPage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1AsSUFBSStCLEVBQUtqRSxTQUFTQyxjQUFjLE1BRWhDLE9BREFnRSxFQUFHeEMsWUFBWVMsR0FDUitCLENBQ1QsQ0FFQUwsYUFBYS9ELEVBQVNnQixFQUFLLElBQ3pCLElBQUlxRCxFQUFZbEUsU0FBU0MsY0FBYyxVQUl2QyxPQUhBaUUsRUFBVWhFLFlBQWNMLEVBQ1gsV0FBVGdCLEdBQ0ZxRCxFQUFVbkQsYUFBYSxPQUFRRixHQUMxQnFELENBQ1QsQ0FFQTFCLFdBQWEsS0FDQXhDLFNBQVMwQyxjQUFjLFFBQzdCQyxRQUFRLEVBR2Z3QixnQkFDRSxJQUFJZixFQUFNcEQsU0FBU0MsY0FBYyxPQUNqQyxNQUFNbUUsRUFBYWhGLEtBQUtpRixTQUFTLFlBQzNCQyxFQUFZbEYsS0FBS21GLFNBQVMsV0FDaENuQixFQUFJM0IsWUFBWTJDLEdBQ2hCaEIsRUFBSTNCLFlBQVk2QyxHQUNoQmxGLEtBQUt5RCxPQUFPVSxXQUFXQyxhQUFhSixFQUFLaEUsS0FBS3lELE9BQ2hELENBRUF3QixTQUFTeEUsR0FDUCxJQUFJMkUsRUFBS3hFLFNBQVNDLGNBQWMsTUFFaEMsT0FEQXVFLEVBQUd0RSxZQUFjTCxFQUNWMkUsQ0FDVCxDQUVBRCxTQUFTMUUsR0FDUCxJQUFJNEUsRUFBS3pFLFNBQVNDLGNBQWMsTUFFaEMsT0FEQXdFLEVBQUd2RSxZQUFjTCxFQUNWNEUsQ0FDVCxDQUVBeEIsYUFDRSxNQUFNYyxFQUFPL0QsU0FBU0MsY0FBYyxRQUNwQ2IsS0FBS3lELE9BQU9VLFdBQVdDLGFBQWFPLEVBQU0zRSxLQUFLeUQsT0FDakQsQ0FFQUssZUFDRSxNQUFNd0IsRUFBUzFFLFNBQVNDLGNBQWMsVUFDdENiLEtBQUt5RCxPQUFPVSxXQUFXQyxhQUFha0IsRUFBUXRGLEtBQUt5RCxPQUNuRCxJRDFGV0UsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9mb3JtLWNyZWF0b3IuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9kb20tY3JlYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVG9kbyBmcm9tIFwiLi90b2RvLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1DcmVhdG9yIHtcbiAgY3JlYXRlVG9Eb0Zvcm0oYnV0dG9uKSB7XG4gICAgY29uc3QgbGFiZWxzID0gdGhpcy5jcmVhdGVMYWJlbHMoKTtcbiAgICBjb25zdCBpbnB1dHMgPSB0aGlzLmNyZWF0ZUlucHV0cygpO1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5hcHBlbmRJbnB1dHMobGFiZWxzLCBpbnB1dHMpO1xuICAgIGVsZW1lbnRzLnB1c2goYnV0dG9uKTtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmRGb3JtRWxlbWVudHMoZWxlbWVudHMpO1xuICB9XG5cbiAgY3JlYXRlTGFiZWxzKCkge1xuICAgIGNvbnN0IGxhYmVsQ29udGVudHMgPSBbJypUaXRsZTonLCAnKkRlc2NyaXB0aW9uOicsICcqRHVlIERhdGU6JywgJypQcmlvcml0eTonXTtcbiAgICBsZXQgbGFiZWxzID0gW107XG4gICAgZm9yIChjb25zdCBjb250ZW50IG9mIGxhYmVsQ29udGVudHMpXG4gICAgICBsYWJlbHMucHVzaCh0aGlzLmNyZWF0ZUxhYmVsKGNvbnRlbnQpKTtcbiAgICByZXR1cm4gbGFiZWxzO1xuICB9XG5cbiAgY3JlYXRlTGFiZWwoY29udGVudCkge1xuICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICBsYWJlbC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgcmV0dXJuIGxhYmVsO1xuICB9XG5cbiAgY3JlYXRlSW5wdXRzKCkge1xuICAgIGNvbnN0IHRleHRJbnB1dHMgPSB0aGlzLmNyZWF0ZVRleHRJbnB1dHMoKTtcbiAgICBjb25zdCBkaXN0aW5jdElucHV0cyA9IHRoaXMuY3JlYXRlRGlzdGluY3RJbnB1dHMoKTtcbiAgICByZXR1cm4gdGV4dElucHV0cy5jb25jYXQoZGlzdGluY3RJbnB1dHMpO1xuICB9XG5cbiAgY3JlYXRlVGV4dElucHV0cygpIHtcbiAgICBsZXQgaW5wdXRzID0gW107XG4gICAgY29uc3QgaW5wdXROYW1lcyA9IFsndG9kby10aXRsZScsICd0b2RvLWRlc2NyaXB0aW9uJ107XG4gICAgZm9yIChjb25zdCBuYW1lIG9mIGlucHV0TmFtZXMpXG4gICAgICBpbnB1dHMucHVzaCh0aGlzLmNyZWF0ZUlucHV0KG5hbWUpKTtcbiAgICByZXR1cm4gaW5wdXRzO1xuICB9XG5cbiAgY3JlYXRlRGlzdGluY3RJbnB1dHMoKSB7XG4gICAgY29uc3QgZGF0ZVBpY2tlciA9IHRoaXMuY3JlYXRlRGF0ZXRpbWVMb2NhbElucHV0KCd0b2RvLWR1ZURhdGUnKTtcbiAgICBjb25zdCBudW1iZXJJbnB1dCA9IHRoaXMuY3JlYXRlTnVtYmVySW5wdXQoJ3RvZG8tcHJpb3JpdHknKTtcbiAgICByZXR1cm4gW2RhdGVQaWNrZXIsIG51bWJlcklucHV0XTtcbiAgfVxuXG4gIGNyZWF0ZUlucHV0KG5hbWUsIHR5cGU9JycpIHtcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgbmFtZSk7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsICcnKTtcbiAgICBpZiAodHlwZSlcbiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsIHR5cGUpO1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIGNyZWF0ZU51bWJlcklucHV0KG5hbWUpIHtcbiAgICAvLyBGb3IgdGhlIG1vbWVudCBpdCdzIG9ubHkgdXNlZCBmb3IgYSBwcmlvcml0eSBpbnB1dFxuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5jcmVhdGVJbnB1dChuYW1lLCAnbnVtYmVyJyk7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCdtaW4nLCAnMScpO1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnbWF4JywgJzMnKTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJzEnKTtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH1cblxuICBjcmVhdGVEYXRldGltZUxvY2FsSW5wdXQobmFtZSkge1xuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5jcmVhdGVJbnB1dChuYW1lLCAnZGF0ZXRpbWUtbG9jYWwnKTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdGhpcy5nZXRDdXJyZW50RGF0ZSgpKTtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH1cblxuICBnZXRDdXJyZW50RGF0ZSgpIHtcbiAgICAvLyBSZXR1cm5zIGRhdGUgaW4gdGhlIGZvcm1hdCB5eXl5LU1NLURELVRoaDptbVxuICAgIHJldHVybiBuZXcgRGF0ZSgpLnRvSlNPTigpLnNsaWNlKDAsMTkpO1xuICB9XG5cbiAgYXBwZW5kSW5wdXRzKGxhYmVscywgaW5wdXRzKSB7XG4gICAgbGV0IGxhYmVsc0RlZXBDb3B5ID0gdGhpcy5kZWVwQ2xvbmVOb2RlcyhsYWJlbHMpO1xuICAgIGNvbnN0IGlucHV0c0RlZXBDb3B5ID0gdGhpcy5kZWVwQ2xvbmVOb2RlcyhpbnB1dHMpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFiZWxzLmxlbmd0aDsgaSsrKVxuICAgICAgbGFiZWxzRGVlcENvcHlbaV0uYXBwZW5kQ2hpbGQoaW5wdXRzRGVlcENvcHlbaV0pO1xuICAgIHJldHVybiBsYWJlbHNEZWVwQ29weTtcbiAgfVxuXG4gIGRlZXBDbG9uZU5vZGVzKG5vZGVzKSB7XG4gICAgbGV0IGRlZXBDbG9uZWROb2RlcyA9IFtdO1xuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2RlcylcbiAgICAgIGRlZXBDbG9uZWROb2Rlcy5wdXNoKG5vZGUuY2xvbmVOb2RlKHRydWUpKTtcbiAgICByZXR1cm4gZGVlcENsb25lZE5vZGVzO1xuICB9XG5cbiAgYXBwZW5kRm9ybUVsZW1lbnRzKGVsZW1lbnRzKSB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICBjb25zdCBlbGVtZW50c0RlZXBDb3B5ID0gdGhpcy5kZWVwQ2xvbmVOb2RlcyhlbGVtZW50cyk7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5jcmVhdGVTdWJtaXRCdXR0b24oJ0NyZWF0ZSB0by1kbycpO1xuICAgIGZvcm0uc2V0QXR0cmlidXRlKCdtZXRob2QnLCAncG9zdCcpO1xuICAgIGVsZW1lbnRzRGVlcENvcHkucHVzaChzdWJtaXRCdXR0b24pO1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50c0RlZXBDb3B5KVxuICAgICAgZm9ybS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVCdXR0b25zKTtcbiAgICByZXR1cm4gZm9ybTtcbiAgfVxuXG4gIGNyZWF0ZVN1Ym1pdEJ1dHRvbih2YWx1ZSkge1xuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgICBzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCd2YWx1ZScsIHZhbHVlKTtcbiAgICByZXR1cm4gc3VibWl0QnV0dG9uO1xuICB9XG5cbiAgaGFuZGxlQnV0dG9ucyA9IChldmVudCkgPT4ge1xuICAgIC8vIENhbmNlbCBidXR0b24gXG4gICAgaWYgKGV2ZW50LnRhcmdldC50eXBlID09PSAnYnV0dG9uJylcbiAgICAgIHRoaXMucmVtb3ZlRm9ybSgpO1xuICAgIC8vIFN1Ym1pdCBidXR0b25cbiAgICBpZiAoZXZlbnQudGFyZ2V0LnR5cGUgPT09ICdzdWJtaXQnKVxuICAgICAgdGhpcy5nYXRoZXJGb3JtRGF0YShldmVudCk7XG4gIH1cblxuICByZW1vdmVGb3JtKCkge1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgZm9ybS5yZW1vdmUoKTtcbiAgfVxuXG4gIGdhdGhlckZvcm1EYXRhKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J3RvZG8tdGl0bGUnXVwiKS52YWx1ZTtcbiAgICBjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J3RvZG8tZGVzY3JpcHRpb24nXVwiKS52YWx1ZTtcbiAgICBjb25zdCB0b2RvRHVlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0ndG9kby1kdWVEYXRlJ11cIikudmFsdWU7XG4gICAgY29uc3QgdG9kb1ByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSd0b2RvLXByaW9yaXR5J11cIikudmFsdWU7XG4gIH1cbn1cbiIsImltcG9ydCBET01DcmVhdG9yIGZyb20gJy4vZG9tLWNyZWF0b3IuanMnO1xuXG5jb25zdCBteURPTUNyZWF0b3IgPSBuZXcgRE9NQ3JlYXRvcjtcbm15RE9NQ3JlYXRvci5sb2FkUGFnZSgpO1xuIiwiaW1wb3J0IEZvcm1DcmVhdG9yIGZyb20gXCIuL2Zvcm0tY3JlYXRvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBET01DcmVhdG9yIHtcbiAgc2NyaXB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0Jyk7XG4gIGZvcm1DcmVhdG9yID0gbmV3IEZvcm1DcmVhdG9yKCk7XG5cbiAgbG9hZFBhZ2UoKSB7XG4gICAgdGhpcy5jcmVhdGVIZWFkZXIoKTtcbiAgICAvLyB0aGlzLmNyZWF0ZVNpZGViYXIoKTtcbiAgICB0aGlzLmNyZWF0ZU1haW4oKTtcbiAgICB0aGlzLmNyZWF0ZUZvb3RlcigpO1xuICB9XG5cbiAgY3JlYXRlSGVhZGVyKCkge1xuICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoZWFkZXInKTtcbiAgICBsZXQgbmF2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbmF2Jyk7XG4gICAgbGV0IG5hdmJhciA9IHRoaXMuY3JlYXRlTmF2YmFyKCk7XG4gICAgaGVhZGVyLmFwcGVuZENoaWxkKG5hdik7XG4gICAgbmF2LmFwcGVuZENoaWxkKG5hdmJhcik7XG4gICAgdGhpcy5zY3JpcHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaGVhZGVyLCB0aGlzLnNjcmlwdCk7XG4gIH1cblxuICBjcmVhdGVOYXZiYXIoKSB7XG4gICAgLy8gY29uc2lkZXIgYWRkaW5nIG1vcmUgZWxlbWVudHNcbiAgICBsZXQgdWwgPSB0aGlzLmNyZWF0ZVVsKCk7XG4gICAgbGV0IHRvZG9CdXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbignTmV3IHRvLWRvJyk7XG4gICAgdG9kb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubG9hZEZvcm0pO1xuICAgIHVsLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlTGkodG9kb0J1dHRvbikpO1xuICAgIHJldHVybiB1bDtcbiAgfVxuXG4gIGNyZWF0ZVVsKCkge1xuICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICByZXR1cm4gdWw7XG4gIH1cblxuICBsb2FkRm9ybSA9ICgpID0+IHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpID09PSBudWxsKSB7XG4gICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKCdDYW5jZWwnLCAnYnV0dG9uJyk7XG4gICAgICBjb25zdCBmb3JtID0gdGhpcy5mb3JtQ3JlYXRvci5jcmVhdGVUb0RvRm9ybShjYW5jZWxCdXR0b24pO1xuICAgICAgbWFpbi5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVMaShlbGVtZW50KSB7XG4gICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBsaS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICByZXR1cm4gbGk7XG4gIH1cblxuICBjcmVhdGVCdXR0b24oY29udGVudCwgdHlwZT0nJykge1xuICAgIGxldCBuZXdCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBuZXdCdXR0b24udGV4dENvbnRlbnQgPSBjb250ZW50O1xuICAgIGlmICh0eXBlID09PSAnYnV0dG9uJylcbiAgICAgIG5ld0J1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCB0eXBlKTtcbiAgICByZXR1cm4gbmV3QnV0dG9uO1xuICB9XG5cbiAgcmVtb3ZlRm9ybSA9ICgpID0+IHtcbiAgICBsZXQgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICBmb3JtLnJlbW92ZSgpO1xuICB9XG5cbiAgY3JlYXRlU2lkZWJhcigpIHtcbiAgICBsZXQgbmF2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbmF2Jyk7XG4gICAgY29uc3QgcHJvamVjdHNIMSA9IHRoaXMuY3JlYXRlSDEoJ1Byb2plY3RzJyk7XG4gICAgY29uc3QgZGVmYXVsdEgyID0gdGhpcy5jcmVhdGVIMignRGVmYXVsdCcpO1xuICAgIG5hdi5hcHBlbmRDaGlsZChwcm9qZWN0c0gxKTtcbiAgICBuYXYuYXBwZW5kQ2hpbGQoZGVmYXVsdEgyKTtcbiAgICB0aGlzLnNjcmlwdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuYXYsIHRoaXMuc2NyaXB0KTtcbiAgfVxuXG4gIGNyZWF0ZUgxKGNvbnRlbnQpIHtcbiAgICBsZXQgaDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xuICAgIGgxLnRleHRDb250ZW50ID0gY29udGVudDtcbiAgICByZXR1cm4gaDE7XG4gIH1cblxuICBjcmVhdGVIMihjb250ZW50KSB7XG4gICAgbGV0IGgyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICBoMi50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgcmV0dXJuIGgyO1xuICB9XG5cbiAgY3JlYXRlTWFpbigpIHtcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWFpbicpO1xuICAgIHRoaXMuc2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG1haW4sIHRoaXMuc2NyaXB0KTtcbiAgfVxuXG4gIGNyZWF0ZUZvb3RlcigpIHtcbiAgICBjb25zdCBmb290ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb290ZXInKTtcbiAgICB0aGlzLnNjcmlwdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShmb290ZXIsIHRoaXMuc2NyaXB0KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkZvcm1DcmVhdG9yIiwiY3JlYXRlVG9Eb0Zvcm0iLCJidXR0b24iLCJsYWJlbHMiLCJ0aGlzIiwiY3JlYXRlTGFiZWxzIiwiaW5wdXRzIiwiY3JlYXRlSW5wdXRzIiwiZWxlbWVudHMiLCJhcHBlbmRJbnB1dHMiLCJwdXNoIiwiYXBwZW5kRm9ybUVsZW1lbnRzIiwibGFiZWxDb250ZW50cyIsImNvbnRlbnQiLCJjcmVhdGVMYWJlbCIsImxhYmVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJ0ZXh0SW5wdXRzIiwiY3JlYXRlVGV4dElucHV0cyIsImRpc3RpbmN0SW5wdXRzIiwiY3JlYXRlRGlzdGluY3RJbnB1dHMiLCJjb25jYXQiLCJpbnB1dE5hbWVzIiwibmFtZSIsImNyZWF0ZUlucHV0IiwiY3JlYXRlRGF0ZXRpbWVMb2NhbElucHV0IiwiY3JlYXRlTnVtYmVySW5wdXQiLCJ0eXBlIiwiaW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRDdXJyZW50RGF0ZSIsIkRhdGUiLCJ0b0pTT04iLCJzbGljZSIsImxhYmVsc0RlZXBDb3B5IiwiZGVlcENsb25lTm9kZXMiLCJpbnB1dHNEZWVwQ29weSIsImkiLCJsZW5ndGgiLCJhcHBlbmRDaGlsZCIsIm5vZGVzIiwiZGVlcENsb25lZE5vZGVzIiwibm9kZSIsImNsb25lTm9kZSIsImZvcm0iLCJlbGVtZW50c0RlZXBDb3B5Iiwic3VibWl0QnV0dG9uIiwiY3JlYXRlU3VibWl0QnV0dG9uIiwiZWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVCdXR0b25zIiwidmFsdWUiLCJldmVudCIsInRhcmdldCIsInJlbW92ZUZvcm0iLCJnYXRoZXJGb3JtRGF0YSIsInF1ZXJ5U2VsZWN0b3IiLCJyZW1vdmUiLCJwcmV2ZW50RGVmYXVsdCIsInNjcmlwdCIsImZvcm1DcmVhdG9yIiwibG9hZFBhZ2UiLCJjcmVhdGVIZWFkZXIiLCJjcmVhdGVNYWluIiwiY3JlYXRlRm9vdGVyIiwiaGVhZGVyIiwibmF2IiwibmF2YmFyIiwiY3JlYXRlTmF2YmFyIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsInVsIiwiY3JlYXRlVWwiLCJ0b2RvQnV0dG9uIiwiY3JlYXRlQnV0dG9uIiwibG9hZEZvcm0iLCJjcmVhdGVMaSIsIm1haW4iLCJjYW5jZWxCdXR0b24iLCJsaSIsIm5ld0J1dHRvbiIsImNyZWF0ZVNpZGViYXIiLCJwcm9qZWN0c0gxIiwiY3JlYXRlSDEiLCJkZWZhdWx0SDIiLCJjcmVhdGVIMiIsImgxIiwiaDIiLCJmb290ZXIiXSwic291cmNlUm9vdCI6IiJ9